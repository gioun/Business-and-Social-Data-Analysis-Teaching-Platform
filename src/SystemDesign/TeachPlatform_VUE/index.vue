<template>

            
    <a-layout-content>
        
        <a-card
        :headStyle="CardHeadStyle"
        :bodyStyle="BodyStyle"
        :bordered="false"
        >
            <template #title>
                <div style="text-align: center;">
                    <h2>å•†ä¸šä¸ç¤¾ä¼šæ•°æ®åˆ†ææ•™å­¦å¹³å°</h2>
                    <p>Business And Social Data Analysis Teaching Platform</p>
                </div>
                
            </template>

            
            

            <template #cover>
                <br>

                <div>
                    <a-row>
                        <a-col :span="8">
                        </a-col>
                        <a-col :span="8">
                        </a-col>
                        
                        <a-col :span="8">
                            <a-tag color="#AE0B2A">ä¸­å›½äººæ°‘å¤§å­¦</a-tag>
                            <a-tag color="#144FA3">ä¿¡æ¯å­¦é™¢</a-tag>
                            <a-tag color="#87d068">ä¿¡æ¯ç®¡ç†ä¸ä¿¡æ¯ç³»ç»Ÿ</a-tag>
                            <a-tag color="#108ee9">ç³»ç»Ÿåˆ†æä¸è®¾è®¡</a-tag>
                            <a-tag color="#f50">å¤§ä¸‰</a-tag>
                            <a-tag color="#2db7f5">æœŸæœ«ä½œä¸š</a-tag>
                        </a-col>
                    </a-row>
                </div>
            </template>



            
            <a-skeleton active />
            

            <div>
                <a-row>
                    <a-col :span="6">
                    </a-col> 
                    <a-col :span="6">
                        <a-popover title="ç‹¬ç‰¹åŠŸèƒ½">
                            <template #content>
                                <p>è¯¥ç³»ç»Ÿå®ç°äº†ä»¥ä¸‹æ–°åŠŸèƒ½ï¼š</p>
                                <p> 1. ä½¿ç”¨å¾®äººå¤§é€‰è¯¾åå•å¯¼å…¥å­¦ç”Ÿï¼Œè‡ªåŠ¨æ³¨å†Œå­¦ç”Ÿç”¨æˆ·</p> 
                                <p> 2. è®¾è®¡å°ç»„ä½œä¸šæ‰“åˆ†åŠŸèƒ½ï¼Œä¸€é”®ä¸ºå­¦ç”Ÿèµ‹åˆ†</p>
                                <p> 3. è®¾è®¡è¯¾ç¨‹æˆç»©å¯¼å‡ºåŠŸèƒ½ï¼Œæ•™å¸ˆå¯å¯¼å‡ºexcelæ–‡ä»¶æŸ¥çœ‹è¯¾ç¨‹å†…æ‰€æœ‰å­¦ç”Ÿæ‰“åˆ†æƒ…å†µï¼›å­¦ç”Ÿå¯å¯¼å‡ºæœ¬è¯¾ç¨‹ä¸ªäººçš„æ‰“åˆ†æƒ…å†µ</p> 
                                <p> 4. æ¯å¤©8ç‚¹è‡ªåŠ¨æ£€ç´¢è‡³ç¬¬äºŒå¤©8ç‚¹æœªå®Œæˆçš„ä½œä¸šï¼Œå¹¶å‘å­¦ç”Ÿå‘é€é‚®ä»¶æé†’</p>
                                <p> 5. æ•™å¸ˆç«¯å¯ä¸€é”®ä¸‹è½½å…¨éƒ¨å­¦ç”Ÿä½œä¸š</p>
                                <p> 6. é€šè¿‡éƒ¨ç½²åˆ°ä¸ªäººæœåŠ¡å™¨çš„æ–¹å¼æ­å»ºæµç¨‹å›¾ç»˜åˆ¶ç•Œé¢ï¼›é€šè¿‡å¤–é“¾ï¼Œå……åˆ†åˆ©ç”¨Lightlyå¹³å°çš„åä½œä¼˜åŠ¿å®ç°åœ¨çº¿ä»£ç ç¼–è¯‘åŠŸèƒ½</p>
                            </template>
                            <a-button size="large">ç‹¬ç‰¹åŠŸèƒ½</a-button>
                        </a-popover>
                    </a-col> 
                    <a-col :span="6">
                        <a-popover title="ç³»ç»Ÿä»‹ç»">
                            <template #content>
                            <p>BSDAæ˜¯ä¸€æ¬¾ç”±ä¸­å›½äººæ°‘å¤§å­¦ç»æµä¿¡æ¯ç®¡ç†ç³»æ•™ç ”ç»„æå‡ºï¼Œç”±ç³»ç»Ÿåˆ†æä¸è®¾è®¡å„ç»„å®è·µè®¾è®¡å¾—åˆ°çš„ç³»ç»Ÿã€‚</p>
                            <p>è¯¥ç³»ç»Ÿåœ¨ä¸­å›½äººæ°‘å¤§å­¦OBEçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ç”¨æˆ·çš„ç—›ç‚¹è°ƒç ”ï¼Œæ‰©å±•äº†æ›´å¤šé€‚ç”¨äºæ•™å¸ˆä¸å­¦ç”Ÿç”¨æˆ·çš„åŠŸèƒ½ã€‚ç›®å‰è¯¥ç³»ç»Ÿéƒ¨ç½²åœ¨é˜¿é‡Œäº‘ä¸åä¸ºäº‘æœåŠ¡å™¨ä¸Šï¼Œå—åˆ°æœåŠ¡å™¨è§„æ ¼çš„é™åˆ¶ï¼Œæ€§èƒ½æ–¹é¢å¹¶æœªå¾—åˆ°è‰¯å¥½ä¿éšœï¼Œ</p>
                            <p>æ¬¢è¿å„ä½ä½¿ç”¨å¹¶æå‡ºä¿®æ”¹æ„è§ã€‚</p>
                            </template>
                            <a-button size="large">ç³»ç»Ÿä»‹ç»</a-button>
                        </a-popover>
                    </a-col> 
                    <a-col :span="6">
                        <a-popover title="è”ç³»æ–¹å¼">
                            <template #content>
                                <p>å¼ ä½³é’‡â€”â€” 2020201387@ruc.edu.cn</p>
                                <p>æ¬§æ´‹å¸†â€”â€” 2020201628@ruc.edu.cn</p>
                                <p>é™ˆæ˜­æ¶¦â€”â€”2020201410@ruc.edu.cn</p>
                                <p>å¾é›¨çµâ€”â€”2020201643@ruc.edu.cn</p>
                                <p>æ¨ä¹™ä¸â€”â€”2020201644@ruc.edu.cn</p>
                            </template>
                            <a-button size="large">è”ç³»æ–¹å¼</a-button>
                        </a-popover>
                    </a-col> 

                </a-row>  

                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                
                

                <a-row>   
                    <a-col :span="4"></a-col>
                    <a-col :span="4"></a-col>
                    <a-col :span="4"><a-button @click="LoginVisible=true" size="large" type="primary" >æ•™å¸ˆç™»å½•</a-button></a-col>
                    <a-col :span="4"></a-col>
                    <a-col :span="4"><a-button @click="LoginVisible=true" size="large"  type="primary">å­¦ç”Ÿç™»å½•</a-button></a-col>

                    
                </a-row>
            </div>


            <!-- ç™»å½• -->
            <a-modal
            v-model:visible="LoginVisible"
            title="è¯·ç™»å½•"
            width="1000px"          
            >
                <a-form v-bind="layout">
                    <a-form-item label="è´¦å·">
                        <a-input v-model:value="LoginData.data.Account" placeholder="è¯·è¾“å…¥è´¦å·" />
                    </a-form-item>
                        
                    <br>

                    <a-form-item  label="å¯†ç ">
                        <a-input-password  v-model:value="LoginData.data.Password" placeholder="è¯·è¾“å…¥å¯†ç " />
                    </a-form-item>
                </a-form>


                <template #footer>
                    <a-button key="back" @click="LoginVisible=false" >å–æ¶ˆ</a-button>
                    <a-button key="submit" type="primary" @click="Login">ç™»å½•</a-button>
                </template>
            </a-modal>


            
        </a-card>
            
    </a-layout-content>
            
            
</template>


<script setup>

import { UserOutlined, LaptopOutlined, NotificationOutlined } from '@ant-design/icons-vue';
import {ref,reactive} from 'vue';
import { message } from 'ant-design-vue'; // æ˜¾ç¤ºæç¤ºä¿¡æ¯
import { useRouter, useRoute } from 'vue-router';
const router=useRouter();
const route=useRoute();
import {useLoginInStore} from '../Status/Store';
const LoginStore=useLoginInStore();

import axios from 'axios';

const LoginData=reactive({
    data:{
        Account:null,
        Password:null,
    }
})





// æ•´ä½“å¤–è§‚é¢„è®¾
const CardHeadStyle={background:'#F0F2F5'};

const BodyStyle={minHeight: '400px'};

const LoginVisible=ref(false);


const layout = {
labelCol: {
    span: 4,//å‰é¢çš„ç©ºé—´
},
wrapperCol: {
    span: 12,
},
};


// const LoginAPI='http://123.56.21.208:8002/api/Users/login';
const LoginAPI='http://123.56.21.208:8002/api/Users/login';

// å¤„ç†æˆåŠŸç™»å½•åè¿›å…¥çš„ä¸åŒé¡µé¢
function SucceedLogin()
{
    if(LoginStore.status.data.IsStudent)
    {
        message.success("æ¬¢è¿è¿›å…¥,"+LoginStore.status.data.Name+'åŒå­¦');
        // alert("æ¬¢è¿è¿›å…¥,"+LoginStore.status.data.Name+'åŒå­¦');
        router.push('/CourseManagement_St');
    }
    else if(LoginStore.status.data.IsTeacher)
    {
        message.success("æ¬¢è¿è¿›å…¥,"+LoginStore.status.data.Name+'è€å¸ˆ');
        // alert("æ¬¢è¿è¿›å…¥,"+LoginStore.status.data.Name+'è€å¸ˆ');
        router.push('/CourseManagement_T');
    }
    else if(LoginStore.status.data.IsAdmin)
    {
        message.success("æ¬¢è¿è¿›å…¥,"+LoginStore.status.data.Name+'çˆ¹');
        // alert("æ¬¢è¿è¿›å…¥,"+LoginStore.status.data.Name+'ç®¡ç†å‘˜');
        
    }
}

// ç™»å½•
function Login(){

// console.log(LoginData.data);

var data = new FormData();
data.append('username', LoginData.data.Account);
data.append('password', LoginData.data.Password);

axios.post('http://123.56.21.208:8002/api/Users/login',data,{
                'Content-type' : 'multipart/form-data'
                })
            .then(function (response) {
                console.log(response);
                console.log(response.data);


                // ğŸ‘‡ç™»å½•å¤„ç†
                LoginStore.status.data.IfLogin=true;
                LoginStore.status.data.Token=response.data.access;
                LoginStore.status.data.ID=response.data.ID;
                LoginStore.status.data.UserName=response.data.username;
                LoginStore.status.data.Name=response.data.name;
                LoginStore.status.data.IsAdmin=response.data.is_manager;
                LoginStore.status.data.IsStudent=response.data.is_student;
                LoginStore.status.data.IsTeacher=response.data.is_teacher;


                // alert("æ¬¢è¿è¿›å…¥,"+LoginStore.status.data.Name+'è€å¸ˆ');
                // console.log('LoginStore:',LoginStore.status.data);
                SucceedLogin();
                localStorage.setItem("PiniaStore", JSON.stringify(LoginStore.status.data));
                
                // router.push('/CourseManagement_T');  



            })
            .catch(function (error) {
                    console.log('error--------------');
                    console.log(error);
                    alert("Error,è”ç³»ç®¡ç†å‘˜è§£å†³é—®é¢˜");
            });

}


</script>





<style scoped>
/* #building{
background:url("./img/background3.svg");
width:100%;			

height:100%;
min-height: 960px;			


background-size:100% auto;} */


/* *{
    margin: 0;
    padding: 0;
}
body{
    background: url(./img/bg.png) no-repeat;
    background-size: 1600px 900px;
}


.header{
    line-height: 15px;
}

.inst{
    width: 100%;
    height: 50px;
    background-color: rgba(0, 47, 88, 0.821)
}

.img0{
    display: inline-block;
    padding-left: 25px;
    padding-top: 4px;
}

.langauge{
    float: right;
    text-align: center;
    line-height: 48px;
    font-size: 20px;
    font-weight: 100;
    font-family:"Century Gothic";
    padding-right: 50px;
}

a{
    text-decoration: none;
    color: aliceblue;
}

.title{
    margin-top: 180px;
    width: 100%;
    height: 50px;
    color: rgba(255, 255, 255, 0.7);
    text-align: center;
    font-size: 35px;
    font-weight: 100;
}

.que{
    margin-top: 200px;
    width: 100%;
    height: 50px;
    color: rgb(255, 255, 255);
    text-align: center;
    font-size: 25px;
    font-weight: 200;
}

button{
    margin-right: 100px;
    width:100px;
    height:35px;
    background-color: rgb(3, 128, 195);
    color: aliceblue;
    font-size: 18px;
    font-weight: 100;
    font-family: "é»‘ä½“";
}

.id{
    width: 1200px;
    margin: 0 auto;
}

ul{
    padding-left: 350px;
}

ul>li{
    list-style: none;
    float: left;
} */

</style>